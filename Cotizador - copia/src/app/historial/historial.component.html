<!--Ejemplo 1 -->
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
<div class="container" style="margin-top: 10px;">
    <div class="row">
        <div *ngFor="let historia of cotizaciones; let i = index">
            <div [id]="' -collapse-' + i" data-accordion="collapse">
                <h2 [id]="'accordion-collapse-heading-' + i">
                    <button type="button"
                        class="flex items-center justify-between w-full p-3 font-medium rtl:text-right text-white-500 border border-b-0 border-gray-200 rounded-t-xl focus:ring-4 focus:ring-gray-200 dark:focus:ring-gray-800 dark:border-gray-700 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-800 gap-3"
                        [attr.data-accordion-target]="'#accordion-collapse-body-' + i"
                        [attr.aria-expanded]="expandedIndex === i" (click)="toggleAccordion(i)"
                        [attr.aria-controls]="'accordion-collapse-body-' + i">
                        <span> {{historia.fecha_cambio}} </span>
                        <svg [ngClass]="{'rotate-180': expandedIndex === i}" data-accordion-icon
                            class="w-3 h-3 shrink-0" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none"
                            viewBox="0 0 10 6">
                            <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                d="M9 5 5 1 1 5" />
                        </svg>
                    </button>
                </h2>
                <div [id]="'accordion-collapse-body-' + i" [ngClass]="expandedIndex === i ? 'block' : 'hidden'"
                    [attr.aria-labelledby]="'accordion-collapse-heading-' + i">
                    <div class="p-3 border border-b-0 border-white-200 dark:border-white-700 dark:bg-white-900">

                        <div *ngIf="Evaluar(historia.cambios,'nombre');else elseNombre">
                            <h5 class="p-3 mb-2 bg-success text-white">
                                Nombre: {{historia.data.nombre}}
                            </h5>
                        </div>
                        <ng-template #elseNombre>
                            <h5>
                                Nombre: {{historia.data.nombre}}
                            </h5>
                        </ng-template>

                        <div *ngIf="Evaluar(historia.cambios,'estado');else elseEstado">
                            <p class="card-text p-3 mb-2 bg-success text-white ">Estado: {{ historia.data['estado'] }}
                            </p>
                        </div>
                        <ng-template #elseEstado>
                            <p class="card-text">Estado: {{ historia.data['estado'] }}</p>
                        </ng-template>

                        <div *ngIf="Evaluar(historia.cambios,'solicitante');else elseSolicitante">
                            <p class="card-text p-3 mb-2 bg-success text-white ">Solicitante: {{
                                historia.data['solicitante'] }}</p>
                        </div>
                        <ng-template #elseSolicitante>
                            <p class="card-text">Solicitante: {{ historia.data['solicitante'] }}</p>
                        </ng-template>

                        <div *ngIf="Evaluar(historia.cambios,'proyectoAsociado');else elseproyectoAsociado">
                            <p class="card-text p-3 mb-2 bg-success text-white ">Proyecto Asociado: {{
                                historia.data['proyectoAsociado'] }}</p>
                        </div>
                        <ng-template #elseproyectoAsociado>
                            <p class="card-text">Proyecto Asociado: {{ historia.data['proyectoAsociado'] }}</p>
                        </ng-template>

                        <div *ngIf="Evaluar(historia.cambios,'descripcionProblema');else elsedescripcionProblema">
                            <p class="card-text p-3 mb-2 bg-success text-white ">Descripcion del Problema: {{
                                historia.data['descripcionProblema'] }}</p>
                        </div>
                        <ng-template #elsedescripcionProblema>
                            <p class="card-text">Descripcion del Problema: {{ historia.data['descripcionProblema'] }}
                            </p>
                        </ng-template>

                        <div *ngIf="Evaluar(historia.cambios,'responsableAE');else elseresponsableAE">
                            <p class="card-text p-3 mb-2 bg-success text-white ">Responsables: {{
                                historia.data['responsableAE'] }}
                            </p>
                        </div>
                        <ng-template #elseresponsableAE>
                            <p class="card-text">Responsables: {{ historia.data['responsableAE'] }}</p>
                        </ng-template>

                        <div *ngIf="Evaluar(historia.cambios,'observaciones');else elseobservaciones">
                            <p class="card-text p-3 mb-2 bg-success text-white ">Observaciones: {{
                                historia.data['observaciones'] }}
                            </p>
                        </div>
                        <ng-template #elseobservaciones>
                            <p class="card-text">Observaciones: {{ historia.data['observaciones'] }}</p>
                        </ng-template>

                        <div *ngIf="Evaluar(historia.cambios,'fecha_entrega');else elsefecha_entrega">
                            <p class="card-text p-3 mb-2 bg-success text-white ">Fecha Esperada de Entrega: {{
                                historia.data['fecha_entrega'] }}</p>
                        </div>
                        <ng-template #elsefecha_entrega>
                            <p class="card-text">Fecha Esperada de Entrega: {{ historia.data['fecha_entrega'] }}</p>
                        </ng-template>

                        <div *ngIf="Evaluar(historia.cambios,'fecha_final');else elsefecha_final">
                            <p class="card-text p-3 mb-2 bg-success text-white ">Estado: {{ historia.data['fecha_final']
                                }}</p>
                        </div>
                        <ng-template #elsefecha_final>
                            <p class="card-text">Estado: {{ historia.data['fecha_final'] }}</p>
                        </ng-template>

                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>